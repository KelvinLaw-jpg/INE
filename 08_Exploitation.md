# Exploitation 

According to PTES: you are paid not just to identify vulnerabilities, but also paid to test and varify the service is vulnerable and the efficacy of the exploit.

### Banner Grabbing
- to identify the services and service version pertinent to that services.
- nmap -sV -O <TargetIP>
- To get related scripts from nmap, we say `ls -al /usr/share/nmap/scripts/ | grep banner` and we say `nmap -sV --script=banner <IP> `
- `nc <IP> <port>` for banner grabbing, nc always got your back if nmap doesn't work
- nmap Vulnerability exploitation scripts are intrusive, so we do not want to run them unless we are sure the safety.

**Vulnerability Detection Scripts**
Demo: port 80 open using apache httpd 2.4.6
- To use vulnerability detection scripts we say `ls -al /usr/share/nmap/scripts/ | grep vuln`
- Here we use shellshock, so we say `nmap -sV -p 80 --script=http-shellshock --script-args "http-shellshock.uri=/gettime.cgi" <IP>` // some script requires additional arguments like shellshock script, the shellshock.url wants the location of the cgi script for the scan

## Searching publicly available exploits
- reliable sources: exploitdb, rapid7, packet storm (for latest news, exploits and vulns)
- if it's offline, then use searchsploit, location: /usr/share/exploitdb
- `searchsploit -u` //update db
- To transfer exploit to working dir, we can say `searchsploit -m <exploiID: 49757>`
- case sensitive search `searchsploit -c OpenSSH` vs `searchsploit -c openssh` is different
- `searchsploit -t vsftpd` contains all exploit with the title containing vsftpd, another example: `searchsploit -t Buffer Overflow`
- `searchsploit -e "Windows XP"` // for exact search term
- `searchsploit remote windows smb`, `searchsploit remote linux ssh` // search that is pertinent to meet input parameters

## Bypassing AV


## Powershell empire


## Pivoting

### Setting up port forwarding and tunneling
