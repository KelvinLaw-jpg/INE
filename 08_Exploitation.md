# Exploitation 

According to PTES: you are paid not just to identify vulnerabilities, but also paid to test and varify the service is vulnerable and the efficacy of the exploit.

### Banner Grabbing
- to identify the services and service version pertinent to that services.
- nmap -sV -O <TargetIP>
- To get related scripts from nmap, we say `ls -al /usr/share/nmap/scripts/ | grep banner` and we say `nmap -sV --script=banner <IP> `
- `nc <IP> <port>` for banner grabbing, nc always got your back if nmap doesn't work
- nmap Vulnerability exploitation scripts are intrusive, so we do not want to run them unless we are sure the safety.

**Vulnerability Detection Scripts**
Demo: port 80 open using apache httpd 2.4.6
- To use vulnerability detection scripts we say `ls -al /usr/share/nmap/scripts/ | grep vuln`
- Here we use shellshock, so we say `nmap -sV -p 80 --script=http-shellshock --script-args "http-shellshock.uri=/gettime.cgi" <IP>` // some script requires additional arguments like shellshock script, the shellshock.url wants the location of the cgi script for the scan

## Searching publicly available exploits
- reliable sources: exploitdb, rapid7, packet storm (for latest news, exploits and vulns)
- if it's offline, then use searchsploit, location: /usr/share/exploitdb
- `searchsploit -u` //update db
- To transfer exploit to working dir, we can say `searchsploit -m <exploiID: 49757>`
- case sensitive search `searchsploit -c OpenSSH` vs `searchsploit -c openssh` is different
- `searchsploit -t vsftpd` contains all exploit with the title containing vsftpd, another example: `searchsploit -t Buffer Overflow`
- `searchsploit -e "Windows XP"` // for exact search term
- `searchsploit remote windows smb`, `searchsploit remote linux ssh` // search that is pertinent to meet input parameters
- `searchsploit -w vsftpd` will display the url instead of EDBID
- TIP: nc.exe comes with windows, located at /usr/share/windows-resources/binaries/nc.exe

## Compiling exploits and cross-compiling exe in linux 

**Cross compiling**
Tools need: Mingw-w64, gcc
additional exploit resources from offset github: https://gitlab.com/exploit-database/exploitdb-bin-sploits

## Netcat Fundamentals

- Reverse shell vs bind shell
- What is netcat? To read and write data to network connection using tcp or udp
- it uses client server communication mode, meaning it can used as both a server and as a client
- rmb the same protocol must be used in both machine, tcp and udp doesnt work tgt. If listener is `nc -nvlup 1234` then the connector should be `nc -nvu <IP> 1234` `nc -nv <IP> 1234` will not work. -u for UDP
- Transfer file through netcat, the system that is sending the file is connecting to the system that is receiving the file so the receive system will need a listener
- `nc -nvlp 1234 > test.txt` > is redirecting all the stuff this system receive to a file and to send we say `nc -nv <IP> 1234 < test.txt` on the sending system.
- `nc -nvlp -e cmd.exe` will send a cmd to who ever is connecting to the system

## Bypassing AV


## Powershell empire


## Pivoting

### Setting up port forwarding and tunneling
